# 交易重组再生
## 背景
根据企业已存在的接口，进行重组再生为新的接口，提高接口复用率，加速业务系统开发。
## 架构
采用客户端与服务器端的CS服务架构
开发时

![开发时](devtime.png)

运行时

![运行时](runtime.png)

## 核心原理
agent通过扫描运行的节点服务，将服务节点的交易元信息推送至服务器统一管理。
业务人员或技术人员对一个或多个接口的交易元信息进行重组形成一个新的接口。
agent拉取最新的再生重组信息，发生变更后将元信息编译成交易单元。
通过冷启动或者热启动节点加载新的交易单元类。
当请求输入时，交易单元根据硬编码进行请求数据转换，同时并发调用多个接口或者串行调用多个接口。最终结果经过转换后返回。

## 交易单元结构
- 数据校验层
- 数据转换层
- 服务调用层（具有服务的调用链路）

## 基本功能

| 功能名  | 功能描述                                     |      |
| ---- | ---------------------------------------- | ---- |
| 导入接口 | 通过组织内私服仓库加载接口到交易总线服务器（符合Skeleton4j定义规范）  |      |
| 接口管理 | 通过指定的gav坐标、服务名和接口名查询接口信息（具备文档管理能力，通过MD方式管理接口文档和开发信息） |      |
| 定义交易 | 在交易总线中使用统一的交易标准定义交易，可以进行交易内接口进行同步方式调用、异步方式调用，交易内采用弹性数据结构。 |      |
| 测试交易 | 在交易总线中提供界面化的测试案例管理，测试定义的交易               |      |
| 部署交易 | 将测试通过的交易打包生成交易元信息，通过网络、文件进行元信息的同步到节点     |      |
| 交易查询 | 通过交易码进行接口信息的查询，并提供文档导出功能                 |      |
| 交易管理 | 进行交易码、交易描述、交易文档管理                        |      |
| 字典管理 | 进行字段定义，设计字段名，字段描述                        |      |
| 节点管理 | 对运行的节点进行状态管理、交易定义信息同步                    |      |

